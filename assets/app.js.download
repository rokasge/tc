function initAddComment({url:t="/api/comment/store",formSelector:e="[data-comment-add]",locale:n=window.nanodata.locales.add_comment}={}){if(!n)throw new Error("Locale is not found!");const o=document.querySelector(e);o&&o.addEventListener("submit",e=>{e.preventDefault();e=new FormData(o);fetch(t,{method:"POST",body:e}).then(e=>e.json()).then(e=>{if(!e.success)throw new Error;o.reset(),alert(n.success)}).catch(e=>{console.error(e),alert(n.fail)})})}function initReplyComment({commentContainerSelector:e="[data-comment-id]",replyFormSelecor:a='[data-comment-reply="form"]',replyFormPlaceSelecor:s='[data-comment-reply="container"]'}={}){e=document.querySelectorAll(e);if(e){initAddComment({formSelector:a});var t=e=>{var{commentId:t,commentAuthor:n}=e.currentTarget.dataset,o=e.target.dataset["commentReply"];if("button"===o){const r=e.currentTarget.querySelector(s),i=document.querySelector(a);i.querySelector('[name="parent_id"]').value=t,i.querySelector('[name="reply_to"]').value=n,i.style.display="block",r.appendChild(i)}};for(const n of e)n.addEventListener("click",t)}}function initRateComment({locale:i=window.nanodata.locales.rate_comment,baseUrl:a="/api/comment/rate/",commentContainerSelector:e="[data-comment-id]",ratingSelector:s="[data-comment-rating]"}={}){e=document.querySelectorAll(e);if(e){var t=e=>{var t,n,o=e.currentTarget.dataset["commentId"],r=e.target.dataset["commentVote"];r&&(e=e.currentTarget.querySelector(s),t=o,o=r,n=e,Lockr.sismember("commentVotes",t)?alert(i.already_rated):fetch(a+t+"/"+o,{method:"POST"}).then(e=>e.json()).then(e=>{n.textContent=e.rating.formatted,Lockr.sadd("commentVotes",t)}).catch(e=>console.error(e)))};for(const n of e)n.addEventListener("click",t)}}function initCompareList({checkboxSelector:r="[data-list-compare]",lang:i=window.nanodata.lang}={}){document.addEventListener("click",e=>{if(e.target&&e.target.dataset&&e.target.dataset.listCompare){const t=document.querySelectorAll(r),n=[];if(t.forEach(e=>{e.checked&&n.push(e.dataset.listCompare)}),2===n.length){const o=new FormData;o.append("lang",i),o.append("page1",n[0]),o.append("page2",n[1]),fetch("/api/search/url",{method:"POST",body:o}).then(e=>e.json()).then(e=>{!0===e.success?window.location.href=e.url:alert("Something went wrong :(")})}}})}!function(){function t(e){e=Array.isArray(e)?{label:e[0],value:e[1]}:"object"==typeof e&&"label"in e&&"value"in e?e:{label:e,value:e};this.label=e.label||e.value,this.value=e.value}function c(e,t){return"string"==typeof e?(t||document).querySelector(e):e||null}function e(e,t){return r.call((t||document).querySelectorAll(e))}function n(){e("input.awesomplete").forEach(function(e){new u(e)})}function u(e,t){var n,o=this,r=(u.count=(u.count||0)+1,this.count=u.count,this.isOpened=!1,this.input=c(e),this.input.setAttribute("autocomplete","off"),this.input.setAttribute("aria-expanded","false"),this.input.setAttribute("aria-owns","awesomplete_list_"+this.count),this.input.setAttribute("role","combobox"),this.options=t=t||{},this),i={minChars:2,maxItems:10,autoFirst:!1,data:u.DATA,filter:u.FILTER_CONTAINS,sort:!1!==t.sort&&u.SORT_BYLENGTH,container:u.CONTAINER,item:u.ITEM,replace:u.REPLACE,tabSelect:!1},a=t;for(n in i){var s=i[n],l=r.input.getAttribute("data-"+n.toLowerCase());"number"==typeof s?r[n]=parseInt(l):!1===s?r[n]=null!==l:s instanceof Function?r[n]=null:r[n]=l,r[n]||0===r[n]||(r[n]=n in a?a[n]:s)}this.index=-1,this.container=this.container(e),this.ul=c.create("ul",{hidden:"hidden",role:"listbox",id:"awesomplete_list_"+this.count,inside:this.container}),this.status=c.create("span",{className:"visually-hidden",role:"status","aria-live":"assertive","aria-atomic":!0,inside:this.container,textContent:0!=this.minChars?"Type "+this.minChars+" or more characters for results.":"Begin typing for results."}),this._events={input:{input:this.evaluate.bind(this),blur:this.close.bind(this,{reason:"blur"}),keydown:function(e){var t=e.keyCode;o.opened&&(13===t&&o.selected?(e.preventDefault(),o.select()):9===t&&o.selected&&o.tabSelect?o.select():27===t?o.close({reason:"esc"}):38!==t&&40!==t||(e.preventDefault(),o[38===t?"previous":"next"]()))}},form:{submit:this.close.bind(this,{reason:"submit"})},ul:{mousedown:function(e){e.preventDefault()},click:function(e){var t=e.target;if(t!==this){for(;t&&!/li/i.test(t.nodeName);)t=t.parentNode;t&&0===e.button&&(e.preventDefault(),o.select(t,e.target))}}}},c.bind(this.input,this._events.input),c.bind(this.input.form,this._events.form),c.bind(this.ul,this._events.ul),this.input.hasAttribute("list")?(this.list="#"+this.input.getAttribute("list"),this.input.removeAttribute("list")):this.list=this.input.getAttribute("data-list")||t.list||[],u.all.push(this)}u.prototype={set list(e){var o;Array.isArray(e)?this._list=e:"string"==typeof e&&-1<e.indexOf(",")?this._list=e.split(/\s*,\s*/):(e=c(e))&&e.children&&(o=[],r.apply(e.children).forEach(function(e){var t,n;e.disabled||(t=e.textContent.trim(),n=e.value||t,e=e.label||t,""!==n&&o.push({label:e,value:n}))}),this._list=o),document.activeElement===this.input&&this.evaluate()},get selected(){return-1<this.index},get opened(){return this.isOpened},close:function(e){this.opened&&(this.input.setAttribute("aria-expanded","false"),this.ul.setAttribute("hidden",""),this.isOpened=!1,this.index=-1,this.status.setAttribute("hidden",""),c.fire(this.input,"awesomplete-close",e||{}))},open:function(){this.input.setAttribute("aria-expanded","true"),this.ul.removeAttribute("hidden"),this.isOpened=!0,this.status.removeAttribute("hidden"),this.autoFirst&&-1===this.index&&this.goto(0),c.fire(this.input,"awesomplete-open")},destroy:function(){c.unbind(this.input,this._events.input),c.unbind(this.input.form,this._events.form),this.options.container||((e=this.container.parentNode).insertBefore(this.input,this.container),e.removeChild(this.container)),this.input.removeAttribute("autocomplete"),this.input.removeAttribute("aria-autocomplete");var e=u.all.indexOf(this);-1!==e&&u.all.splice(e,1)},next:function(){var e=this.ul.children.length;this.goto(this.index<e-1?this.index+1:e?0:-1)},previous:function(){var e=this.ul.children.length,t=this.index-1;this.goto(this.selected&&-1!=t?t:e-1)},goto:function(e){var t=this.ul.children;this.selected&&t[this.index].setAttribute("aria-selected","false"),-1<(this.index=e)&&0<t.length&&(t[e].setAttribute("aria-selected","true"),this.status.textContent=t[e].textContent+", list item "+(e+1)+" of "+t.length,this.input.setAttribute("aria-activedescendant",this.ul.id+"_item_"+this.index),this.ul.scrollTop=t[e].offsetTop-this.ul.clientHeight+t[e].clientHeight,c.fire(this.input,"awesomplete-highlight",{text:this.suggestions[this.index]}))},select:function(e,t){var n;e?this.index=c.siblingIndex(e):e=this.ul.children[this.index],e&&(n=this.suggestions[this.index],c.fire(this.input,"awesomplete-select",{text:n,origin:t||e})&&(this.replace(n),this.close({reason:"select"}),c.fire(this.input,"awesomplete-selectcomplete",{text:n})))},evaluate:function(){var n=this,o=this.input.value;o.length>=this.minChars&&this._list&&0<this._list.length?(this.index=-1,this.ul.innerHTML="",this.suggestions=this._list.map(function(e){return new t(n.data(e,o))}).filter(function(e){return n.filter(e,o)}),!1!==this.sort&&(this.suggestions=this.suggestions.sort(this.sort)),this.suggestions=this.suggestions.slice(0,this.maxItems),this.suggestions.forEach(function(e,t){n.ul.appendChild(n.item(e,o,t))}),0===this.ul.children.length?(this.status.textContent="No results found",this.close({reason:"nomatches"})):(this.open(),this.status.textContent=this.ul.children.length+" results found")):(this.close({reason:"nomatches"}),this.status.textContent="No results found")}},u.all=[],u.FILTER_CONTAINS=function(e,t){return RegExp(c.regExpEscape(t.trim()),"i").test(e)},u.FILTER_STARTSWITH=function(e,t){return RegExp("^"+c.regExpEscape(t.trim()),"i").test(e)},u.SORT_BYLENGTH=function(e,t){return e.length!==t.length?e.length-t.length:e<t?-1:1},u.CONTAINER=function(e){return c.create("div",{className:"awesomplete",around:e})},u.ITEM=function(e,t,n){return c.create("li",{innerHTML:""===t.trim()?e:e.replace(RegExp(c.regExpEscape(t.trim()),"gi"),"<mark>$&</mark>"),role:"option","aria-selected":"false",id:"awesomplete_list_"+this.count+"_item_"+n})},u.REPLACE=function(e){this.input.value=e.value},u.DATA=function(e){return e},Object.defineProperty(t.prototype=Object.create(String.prototype),"length",{get:function(){return this.label.length}}),t.prototype.toString=t.prototype.valueOf=function(){return""+this.label};var r=Array.prototype.slice;c.create=function(e,t){var n,o=document.createElement(e);for(n in t){var r,i=t[n];"inside"===n?c(i).appendChild(o):"around"===n?((r=c(i)).parentNode.insertBefore(o,r),o.appendChild(r),null!=r.getAttribute("autofocus")&&r.focus()):n in o?o[n]=i:o.setAttribute(n,i)}return o},c.bind=function(t,e){if(t)for(var n in e){var o=e[n];n.split(/\s+/).forEach(function(e){t.addEventListener(e,o)})}},c.unbind=function(t,e){if(t)for(var n in e){var o=e[n];n.split(/\s+/).forEach(function(e){t.removeEventListener(e,o)})}},c.fire=function(e,t,n){var o,r=document.createEvent("HTMLEvents");for(o in r.initEvent(t,!0,!0),n)r[o]=n[o];return e.dispatchEvent(r)},c.regExpEscape=function(e){return e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")},c.siblingIndex=function(e){for(var t=0;e=e.previousElementSibling;t++);return t},"undefined"!=typeof self&&(self.Awesomplete=u),"undefined"!=typeof Document&&("loading"!==document.readyState?n():document.addEventListener("DOMContentLoaded",n)),u.$=c,u.$$=e,"object"==typeof module&&module.exports&&(module.exports=u)}(),function(t,n){"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports&&(exports=module.exports=n(0,exports)):"function"==typeof define&&define.amd?define(["exports"],function(e){t.Lockr=n(0,e)}):t.Lockr=n(0,{})}(this,function(e,a){"use strict";return Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;for((n=n<0?Math.ceil(n):Math.floor(n))<0&&(n+=t);n<t;n++)if(n in this&&this[n]===e)return n;return-1}),a.prefix="",a._getPrefixedKey=function(e,t){return(t=t||{}).noPrefix?e:this.prefix+e},a.set=function(e,t,n){var o=this._getPrefixedKey(e,n);try{localStorage.setItem(o,JSON.stringify({data:t}))}catch(n){console&&console.warn("Lockr didn't successfully save the '{"+e+": "+t+"}' pair, because the localStorage is full.")}},a.get=function(e,t,n){var o,n=this._getPrefixedKey(e,n);try{o=JSON.parse(localStorage.getItem(n))}catch(e){o=localStorage[n]?{data:localStorage.getItem(n)}:null}return o?"object"==typeof o&&void 0!==o.data?o.data:void 0:t},a.sadd=function(e,t,n){var o,r=this._getPrefixedKey(e,n),i=a.smembers(e);if(-1<i.indexOf(t))return null;try{i.push(t),o=JSON.stringify({data:i}),localStorage.setItem(r,o)}catch(n){console.log(n),console&&console.warn("Lockr didn't successfully add the "+t+" to "+e+" set, because the localStorage is full.")}},a.smembers=function(e,t){var n,t=this._getPrefixedKey(e,t);try{n=JSON.parse(localStorage.getItem(t))}catch(e){n=null}return n&&n.data?n.data:[]},a.sismember=function(e,t,n){return-1<a.smembers(e).indexOf(t)},a.keys=function(){var t=[],e=Object.keys(localStorage);return 0===a.prefix.length?e:(e.forEach(function(e){-1!==e.indexOf(a.prefix)&&t.push(e.replace(a.prefix,""))}),t)},a.getAll=function(e){var t=a.keys();return e?t.reduce(function(e,t){var n={};return n[t]=a.get(t),e.push(n),e},[]):t.map(function(e){return a.get(e)})},a.srem=function(e,t,n){var o,r=this._getPrefixedKey(e,n),i=a.smembers(e,t);-1<(o=i.indexOf(t))&&i.splice(o,1),o=JSON.stringify({data:i});try{localStorage.setItem(r,o)}catch(n){console&&console.warn("Lockr couldn't remove the "+t+" from the set "+e)}},a.rm=function(e){e=this._getPrefixedKey(e);localStorage.removeItem(e)},a.flush=function(){a.prefix.length?a.keys().forEach(function(e){localStorage.removeItem(a._getPrefixedKey(e))}):localStorage.clear()},a});const rememberScrollPositionAfterReload={save:()=>{window.addEventListener("beforeunload",function(e){sessionStorage.setItem("scrollpos",window.scrollY),sessionStorage.setItem("scrollurl",window.location.pathname)})},scrollTo:()=>{document.addEventListener("DOMContentLoaded",function(e){var t=sessionStorage.getItem("scrollpos"),n=sessionStorage.getItem("scrollurl");t&&n===window.location.pathname&&(window.scrollTo(0,t),sessionStorage.removeItem("scrollpos"))})}};function initModelChooser({type:t,url:n="/api/choose-specs",submitButtonSelector:e="[data-query-model-button]",formFirstSelector:o="[data-query-model]"}={}){const r=document.querySelector(e);r.addEventListener("click",e=>{e.preventDefault();e=JSON.stringify({pageUrl:window.location.href.split("?")[0],formsData:(e=new FormData(document.querySelector(o)),Object.fromEntries(e.entries())),type:t});fetch(n,{method:"POST",body:e}).then(e=>e.json()).then(e=>{!0===e.success?window.location.href=e.url:alert("Something went wrong :(")}).catch(e=>console.error(e))})}function initModelRadioBox({allRadioModelButtonSelector:e="[data-radio-model]",submitButtonSelector:i="[data-query-model-button]"}={}){const t=document.querySelectorAll(e);t.length&&t.forEach(e=>{e.addEventListener("change",e=>{var[t,n]=e.target.name.split("_"),e=e.target.value;const o=document.querySelector("[data-query-model"),r=o.querySelector(`[name="${t}_${n}"]`);r.value=e,document.querySelector(i).click()})})}function showHideChooseModelBox({chooseModelShowbuttonSelector:e="[data-choose-model-show-button]",chooseModelBoxSelector:t="[data-choose-model-box]"}={}){const n=document.querySelector(e);n&&n.addEventListener("click",e=>{document.querySelector(t).classList.toggle("toggle-hide")})}function initInputPageSearch({inputSelector:e,allPages:t=!0,minChars:n=0,maxItems:r=500,visualEffects:o=!1,directContentType:i=void 0}){const a=(e,t)=>{const n=document.querySelector(`[data-compare-for="${e}"]`);n&&(n.innerHTML=t)},s={reset(e){o&&(e.style.backgroundColor="#fff",delete e.dataset.correctSelected,a(e.name,""))},selectedCorrectly(e){o&&(e.style.backgroundColor="rgb(232, 249, 232)",e.dataset.correctSelected="Yes",a(e.name,"✅"))},selectedIncorrectly(e){o&&"Yes"!==e.dataset.correctSelected&&(e.style.backgroundColor="#ffecec",a(e.name,"❌"))}},l=async({query:e=void 0,limit:t=r}={})=>{const n=await fetch(`/api/search?q=${e||"*"}&limit=${t}&type=`+u),o=await n.json();d.list=o.map(e=>[e.name,e.slug])},c=document.querySelector(e);if(!c)throw new Error(`Cannot find element with selector "${e}"`);const u=c.dataset.contentType||i;if(!u)throw new Error("Cannot find content type in dataset!");const d=new Awesomplete(c,{minChars:n,maxItems:r,sort:!1,filter:(e,t)=>!0,replace:function(e){this.input.value=e.label}});let h=0;return c.addEventListener("input",async e=>{e=e.target.value;s.reset(c),h+=1,t||e?n<=h&&(await l({query:e,limit:e?10:r}),d.evaluate()):d.list=[]}),c.addEventListener("focus",async e=>{e=e.target.value;0===d.ul.childNodes.length?0===n&&(await l({query:"*"}),d.evaluate()):d.ul.hasAttribute("hidden")?t&&(await l({query:e,limit:e?10:r}),d.evaluate(),d.open()):d.close()}),c.addEventListener("focusout",e=>{s.selectedIncorrectly(c)}),c.addEventListener("awesomplete-selectcomplete",e=>{s.selectedCorrectly(c);e=e.target.value;fetch(`/api/search?q=${e}&limit=10&type=${u}&selected=yes`)}),c}function initCompareInputs({locale:n=window.nanodata.locales.compareSearchBox,lang:o=window.nanodata.lang,comparePagesForm:e="[data-compare-pages-form]"}={}){if(!n)throw new Error("Locale is not found!");const r=initInputPageSearch({inputSelector:"#input-compare-1",visualEffects:!0}),i=initInputPageSearch({inputSelector:"#input-compare-2",visualEffects:!0}),a=document.querySelector(e);a.addEventListener("submit",e=>{e.preventDefault();const t=new FormData(a);return t.append("lang",o),!t.get("page1")||!t.get("page2")||"Yes"!==r.dataset.correctSelected||"Yes"!==i.dataset.correctSelected?alert(n.choose_models):void fetch("/api/search/url",{method:"POST",body:t}).then(e=>e.json()).then(e=>{!0===e.success?window.location.href=e.url:alert(n.error)})})}function initComparePoll({url:n="/api/vote/poll",locale:o=window.nanodata.locales.vote_front,customUrlSelector:e="[data-poll-url]",radiosSelector:t='[name="poll-check"]',contentSelector:r="[data-poll-content]",submitButtonSelector:i="[data-poll-submit]",countSelector:a="[data-poll-all-amount]"}={}){if(!o)throw new Error("Locale is not found!");const s=document.querySelector(e).value,l=document.querySelectorAll(t),c=document.querySelector(r),u=document.querySelector(i),d=document.querySelector(a),h=Lockr.sismember("compareVotes",s);h&&(u.remove(),l.forEach(e=>e.remove())),u.addEventListener("click",e=>{if(h)return alert(o.already_voted);let t;if(l.forEach(e=>{e.checked&&(t=Number(e.value))}),!t)return alert(o.choose_item);fetch(n,{credentials:"same-origin",method:"POST",body:JSON.stringify({type:"comparison",custom_url:s,poll_number:t}),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{const n=e["poll"];n&&n.avg&&(Lockr.sadd("compareVotes",s),c.querySelectorAll(".score-bar-line-filled").forEach((e,t)=>{e.style.width=n.poll[t+1].percent+"%"}),c.querySelectorAll(".score-bar-result-number").forEach((e,t)=>{e.innerHTML=`${n.poll[t+1].value} <span style="color: #696969; font-weight: normal;">(${n.poll[t+1].percent}%)</span>`}),d.textContent=n.count,u.remove(),l.forEach(e=>e.remove()))}).catch(e=>console.error(e))})}function initPriceQuality({url:o="/api/price-quality/calculate",contentType:r=window.nanodata.contentType,ids:i=window.nanodata.ids,lang:a=window.nanodata.lang,locales:s=window.nanodata.locales.priceQuality,formSelector:e="[data-price-quality]",renderSelector:l="[data-price-quality-render]",submitButtonSelector:t="[data-price-quality-submit]"}={}){const c=document.querySelector(e),n=document.querySelector(t);n.addEventListener("click",e=>{if(e.preventDefault(),c.checkValidity()){const t=document.querySelector(l),n=(t.innerHTML=`<div class="mb mt" style="text-align: center; background: #e6e6e8; border-radius: 4px; color: #3949ab; padding: 8px 12px; font-size: 16px;">${s.loading}</div>`,new FormData(c));n.append("ids",i),n.append("contentType",r),n.append("lang",a),fetch(o,{method:"POST",body:n}).then(e=>e.json()).then(e=>{e.success||alert("Sorry, some error has occurred :("),t.innerHTML=e.html})}else c.reportValidity()})}function initPageRating({url:n="/api/vote/poll",raterSelector:e="[data-star-rating]",avgRatingSelector:t=".rating-value",countRatingSelector:o=".rating-count"}={}){e=document.querySelector(e);const r=document.querySelector(t);t=parseFloat(r.textContent);const i=Number(e.dataset.starRating),a=raterJs({element:e,rating:t,rateCallback:(e,t)=>{fetch(n,{credentials:"same-origin",method:"POST",body:JSON.stringify({type:"stars",page_id:i,poll_number:e}),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{e=e.poll;e&&e.avg&&(document.querySelector(o).textContent=e.count,r.textContent=e.avg,a.setRating(e.avg))}).catch(e=>console.error(e)),Lockr.sadd("pageVotes",i),a.disable(),t()}});Lockr.sismember("pageVotes",i)&&a.disable()}function initFeedback({}){}function initModal({triggerDataAttr:o="data-modal-trigger",actionDataAttr:r="data-modal-action",modalDataAttr:i="data-modal-id",modalShowClass:a="modal-show"}={}){document.addEventListener("click",e=>{var t,n=e=>{e&&e.classList.toggle(a)};e.target.getAttribute(o)&&(t=e.target.getAttribute(o),n(document.querySelector(`[${i}="${t}"]`))),!e.target.getAttribute(i)&&"close"!==e.target.getAttribute(r)||n(document.querySelector("."+a))},!1)}